# [0014. KMP 算法](https://github.com/tnotesjs/TNotes.algorithms/tree/main/notes/0014.%20KMP%20%E7%AE%97%E6%B3%95)

<!-- region:toc -->

::: details 📚 相关资源

- [📒 TNotes（相关知识库）](https://tnotesjs.github.io/TNotes/)
  - [TNotes.leetcode/notes/0028](https://tnotesjs.github.io/TNotes.leetcode/notes/0028/)

:::

- [1. 🎯 本节内容](#1--本节内容)
- [2. 🫧 评价](#2--评价)
- [3. 🤔 KMP 是什么？](#3--kmp-是什么)
- [4. 🤔 KMP 算法的基本思想是什么？](#4--kmp-算法的基本思想是什么)
- [5. 🤖 kmp 算法是中国计算机考研常考的知识点吗？](#5--kmp-算法是中国计算机考研常考的知识点吗)
  - [5.1. 常考形式包括：](#51-常考形式包括)
- [6. 🔍 相关 LeetCode 例题](#6--相关-leetcode-例题)

<!-- endregion:toc -->

## 1. 🎯 本节内容

- todo

## 2. 🫧 评价

- todo

## 3. 🤔 KMP 是什么？

KMP（Knuth-Morris-Pratt）算法是一种高效的字符串匹配算法，由 Donald Knuth、Vaughan Pratt 和 James H. Morris 独立发明，并于 1977 年发表。这种算法的主要优点在于它能够在线性时间内完成模式串在文本串中的查找，即其时间复杂度为 O(n+m)，其中 n 是文本串的长度，m 是模式串的长度。

- 文本串 - 待匹配的字符串，也称为主串（haystack）。
- 模式串 - 要在文本串中查找的字符串，也称为子串（needle）。

KMP 算法因其高效性和实用性，在文本处理、搜索引擎等领域有着广泛的应用。通过预处理模式串，KMP 能够在最坏情况下也能保证线性时间复杂度，这使得它成为解决字符串匹配问题的一个非常优秀的算法。

## 4. 🤔 KMP 算法的基本思想是什么？

KMP 算法的核心在于利用已经匹配过的信息，避免从头开始重新匹配。当模式串的一个位置与主串不匹配时，KMP 算法可以知道之前已经匹配过的字符信息，并据此决定模式串应该移动的位置，而不是简单地将模式串向后移动一位。

KMP 算法的关键组件【关键在于理解匹配过程】

1. 部分匹配表（Partial Match Table, PMT），也称为“next 数组”：
   - 这是一个数组，用于存储模式串中每个前缀的最大相同前后缀的长度。
   - 例如，对于模式串 "ABCDABD"，其 PMT（或 next 数组）可能是 [0, 0, 0, 0, 1, 2, 0]。这意味着，如果在模式串的第 `j` 个位置失配，那么模式串应该回退到 `next[j - 1]` 的位置继续匹配。
     - 具体来说，假设匹配到 ABCDAB D 加粗的 D 位置时候出现了失配的情况，此时 j 为 6，这时候就需要让 j 回退，如果暴力处理的话，一旦出现了失配的情况，那么直接将 j 回退到开头 0 的位置，一切都从头开始。但是 next 可以对回退的逻辑进行优化，此时只需要回退到 `next[j - 1]` 的位置（也就是 `next[6 - 1] => 2`）即可，表示下次匹配的位置是 AB C DABD 中索引为 2 的位置，也就是加粗的 C 的位置开始，这是因为 AB CDABD 和 ABCD AB D 子串 AB 相同，虽然 D 位置出现了失配，但是没必要回退到开头，D 前边的 AB 子串和开始位置开始的 AB 是相同的，下次直接从 C 开始即可。
   - PMT 的构建是 KMP 算法中较为复杂的部分，但一旦构建好，就能大大提高匹配效率。
2. 匹配过程：
   - 在匹配过程中，KMP 算法使用两个指针，一个指向主串（haystack），另一个指向模式串（needle）。
   - 当发生失配时，模式串指针不会回溯到起始位置，而是根据 PMT 移动到下一个可能匹配的位置。
   - 如果模式串完全匹配，则返回匹配的起始位置；否则，继续匹配直到主串结束或找到匹配。

## 5. 🤖 kmp 算法是中国计算机考研常考的知识点吗？

是的，KMP 算法（Knuth-Morris-Pratt 算法）是中国计算机专业硕士研究生入学考试（即“计算机考研”）中 较为常见且重要的考点，尤其在以下几类考试中：

- 408 计算机学科专业基础综合（全国统考）：KMP 算法属于“数据结构”部分，常出现在选择题或应用题中。虽然近年直接大题考查频率略降，但其核心思想（如 部分匹配表 / next 数组构造、字符串匹配过程中的“跳转避免回溯”思想）仍常以选择题或填空题形式出现。
- 各高校自命题科目（如清华、浙大、北航、华科等）：很多学校偏爱考查 KMP，因其能综合考察对算法思想、数组操作、递推逻辑和编程能力的理解。部分院校曾出过手写 `next` 数组 / `nextval` 数组，甚至要求写出完整匹配过程或代码片段。

### 5.1. 常考形式包括：

- ✅ 给定模式串，求其 `next` 或 `nextval` 数组；
- ✅ 描述 KMP 相比朴素匹配的优化点（核心：利用已匹配信息避免主串指针回溯）；
- ✅ 给出匹配过程，问某一步主串/模式串指针位置；
- ✅ （较少但存在）手写 `next` 数组构造函数或完整 KMP 匹配伪代码。

> 📌 提示：KMP 算法本身不难，但 `next` 数组的定义在不同教材中略有差异（如是否从 0 开始、是否加 1 偏移），建议以目标院校指定参考书（如严蔚敏《数据结构》C 语言版）为准。近年趋势更侧重理解而非死记公式。

需要我帮你梳理 KMP 的核心推导逻辑或典型真题示例吗？

## 6. 🔍 相关 LeetCode 例题

- [28. 实现 strStr()](https://leetcode.cn/problems/implement-strstr/)
